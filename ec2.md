# EC2 (Elastic Compute Cloud)

EC2는 Amazon 에서 제공하는 클라우드 컴퓨팅으로, 가상의 컴퓨터를 제공받는 서비스이다. 생성과 삭제가 간편하고 빠르며 사용한 만큼 금액을 지불하게 된다.

### 특징

- 원하는 컴퓨팅 파워에 따라 EC2를 생성할 수 있다
- 사용한 용량에 따라 요금이 책정된다
- 다양한 용도에 따라 최적화된 서버를 제공한다

## Amazon Machine Image(AMI)

EC2 인스턴스를 생성하기 위해선 AMI 를 통해 환경 셋팅을 설정해야한다. 즉, AMI 는 인스턴스 실행을 위한 정보를 모은 단위로서 OS 및 CPU 프로세스 타입과 
소프트웨어를 저장한 템플릿이다.

### 구성

- 1개 이상의 EBS snapshot
- 어떤 EBS snapshot 과 연결되었는지에 대한 정보
- 사용 권한
- EBS 블록 디바이스 매핑

### Snapshot

AMI 는 스냅샷 형태로 데이터를 저장 가능하며, 증분식 저장을 하는 특징이 있다. 증분식이란 데이터가 달라진 부분만 저장한다는 것이다.
도커 이미지를 만들어 저장하는 것과 비슷한 구조로, 데이터가 변경된 부분만을 스냅샷으로 저장한다. 이런 스냅샷 파일들은 주로 `Amazon S3`에 저장된다.

### AMI vs Snapshot

기본적으로 AMI 나 Snapshot 모두 EBS 를 백업하는 점에서는 동일하지만, 범위의 차이가 있다고 볼 수 있다.
AMI 의 경우 EC2에 연결된 `모든 EBS 볼륨을 백업`하는 것인 반면, Snapshot 은 `특정 EBS 볼륨만을 백업`하는 차이가 있다.
둘 모두 EC2 인스턴스를 생성 가능하지만, 스냅샷의 경우 스냅샷을 이용해 AMI 을 생성하고 나서 인스턴스 생성이 가능한 차이점이 있다.
앞서 말했듯이, 스냅샷은 EBS 특정 EBS 볼륨만이 백업되어 있기 때문이다.

- AMI
  - EC2에 연결된 모든 볼륨 백업
  - 인스턴스가 어떤 EBS 스냅샷과 연결되었는지에 대한 정보 포함
  - 사용 대상
    - 백업된 인스턴스 복구 시
    - 설정이 완료된 인스턴스 이미지를 다시 만들고 싶은 경우
    - Auto scaling group 에서 새 인스턴스를 자동으로 생성하고 싶은 경우
- SnapShot
  - 특정 시점, 특정 EBS 백업
  - 인스턴스 생성 시 AMI 생성, 이 경우 스냅샷이 root volume 으로 지정
  - 데이터만 백업하고 싶은 경우